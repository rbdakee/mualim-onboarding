# Tajwid Onboarding (Next.js)

Онбординг-приложение на Next.js. **Анализ аудио и сохранение лидов выполняет отдельный бэкенд** (FastAPI), а этот репозиторий содержит только фронт + тонкие server-side прокси-роуты.

## Архитектура (почему так)

- **Браузер** записывает аудио и отправляет его в Next.js на:
  - `POST /api/analyze-tajwid`
  - `POST /api/submit-lead`
- **Next.js (server-side)** проксирует запросы в бэкенд:
  - `POST <BACKEND>/api/analyze`
  - `POST <BACKEND>/api/submit-lead`

Такой подход нужен, чтобы:
- **не хранить `X-API-TOKEN` в браузере** (секрет остаётся на серверной стороне Next.js);
- иметь единый фронтовый URL (`/api/*`) без CORS-сложностей.

## Запуск

### 1) Установка зависимостей

```bash
pnpm install
```

### 2) Переменные окружения

В корне проекта укажите:

```env
IP=127.0.0.1
PORT=5000
X-API-TOKEN=ваш_токен
```

> Примечание: в некоторых окружениях переменная с дефисом (`X-API-TOKEN`) может не читаться.
> Тогда используйте `X_API_TOKEN` (значение то же).

### 3) Запуск

```bash
pnpm dev
```

Приложение будет доступно по адресу `http://localhost:3000`.

## API (со стороны фронта)

- `POST /api/analyze-tajwid` — принимает `multipart/form-data` с `audio` (+ опционально `surah`, `ayahNumber`)
- `POST /api/submit-lead` — принимает JSON с данными лида

Оба роутинга работают через прокси и требуют корректно настроенный бэкенд.
